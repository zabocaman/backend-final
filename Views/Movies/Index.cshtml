@model MovieSearchViewModel
@{
    ViewData["Title"] = "Movies";
}

<section class="hero">
    <div class="hero-content">
        <p class="eyebrow">Feature 1 â€¢ Cinematic search</p>
        <h1>Find the perfect flick.</h1>
        <p class="lede">Type any movie title to pull back details from the RapidAPI-powered OMDb catalog. We surface the title, lead actor, and genre so you can decide what to watch next.</p>
        <form asp-action="Index" method="get" class="search-bar">
            <input type="text" name="searchTerm" value="@Model.Query" placeholder="e.g. Spider-Man, Barbie, Parasite" aria-label="Search for a movie" />
            <button type="submit">ðŸŽ¥ Search</button>
        </form>
        <div class="feature-flair">
            <div>
                <span class="badge">Feature 2</span>
                <strong>Movie cards</strong> showcase the lead actor, genre, and a mood-setting plot summary.
            </div>
            <div class="clapper">ðŸŽ¬</div>
        </div>
    </div>
    <div class="hero-art">
        <div class="ticket">Admit One</div>
        <div class="film-reel">
            <div class="reel-hole"></div>
            <div class="reel-hole"></div>
            <div class="reel-hole"></div>
            <div class="reel-hole"></div>
        </div>
        <div class="neon">Now Showing</div>
    </div>
</section>

<section class="results-panel">
    <div class="panel-heading">
        <h2>Results</h2>
        <p class="hint">We reach out to the API for each title and hydrate it with cast + genre data.</p>
    </div>

    @if (!string.IsNullOrWhiteSpace(Model.ErrorMessage))
    {
        <div class="alert">@Model.ErrorMessage</div>
    }

    @if (Model.HasResults)
    {
        <div class="movie-grid">
            @foreach (var movie in Model.Results)
            {
                <article class="movie-card">
                    <div class="poster" style="background-image: url('@movie.PosterUrl');"></div>
                    <div class="movie-meta">
                        <div class="title-row">
                            <h3>@movie.Title</h3>
                            <span class="year">@movie.Year</span>
                        </div>
                        <p class="genre">@movie.Genre</p>
                        <p class="lead">Lead actor: <strong>@movie.LeadActor</strong></p>
                        <p class="plot">@movie.Plot</p>
                        <a class="imdb-link" href="https://www.imdb.com/title/@movie.ImdbId" target="_blank" rel="noreferrer">View on IMDb â†—</a>
                    </div>
                </article>
            }
        </div>
    }
    else if (string.IsNullOrWhiteSpace(Model.ErrorMessage) && string.IsNullOrWhiteSpace(Model.Query))
    {
        <div class="empty-state">
            <p>Pop some popcorn and start typing a title to light up the marquee.</p>
        </div>
    }
</section>

<section class="info-rail">
    <div class="info-card">
        <h3>How it works</h3>
        <p>We first search by title, then fetch a detail record for each result to grab the lead actor list, genre, and plot so every card feels like a mini movie poster.</p>
    </div>
    <div class="info-card">
        <h3>Pro tip</h3>
        <p>Search broad titles like "Avengers" or niche picks like "Before Sunrise"â€”the view handles both and celebrates your finds with neon gradients.</p>
    </div>
    <div class="info-card">
        <h3>API safety</h3>
        <p>Keep your RapidAPI key safe by setting it in <code>appsettings.json</code> or via environment variables. The HttpClient injects it on every request.</p>
    </div>
</section>
